<?php
// Définir les traductions pour l'interface
$translations = [
    'en' => [
        'title' => 'Settings',
        'personal_info' => 'Personal Information',
        'name' => 'Name',
        'surname' => 'Surname',
        'email' => 'Email',
        'save' => 'Save',
        'theme' => 'Theme',
        'dark_mode' => 'Dark Mode',
        'language' => 'Language',
        'select_language' => 'Select Language',
        'notifications' => 'Notifications',
        'enable_notifications' => 'Enable Notifications',
        'change_password' => 'Change Password',
        'current_password' => 'Current Password',
        'new_password' => 'New Password',
        'confirm_password' => 'Confirm Password',
        'dashboard' => 'Dashboard',
        'profile' => 'Profile',
        'calendar' => 'Calendar',
        'Notifications' => 'Notifications',
        'logout' => 'Logout',
        'app_name' => 'Taskenuis',
        'success_message' => 'Action completed successfully!',
        'error_message' => 'Error during action execution.',
        'python_execution_error' => 'Error: Python script execution failed. Check the Python path (%s) and permissions.',
        'python_json_error' => 'Error: Python script response is not valid JSON. Check python_output.log for details.',
        'search_unexpected_error' => 'Unexpected error during search.',
        'tasks_fetch_error' => 'Error fetching tasks: %s',
        'task_not_found' => 'Task not found.',
        'task_fetch_error' => 'Error fetching task: %s',
        'search_placeholder' => 'Search for a task...',
        'all_categories' => 'All categories',
        'category_work' => 'Work',
        'category_personal' => 'Personal',
        'category_shopping' => 'Shopping',
        'search_button' => 'Search',
        'sort_none' => 'Sort: None',
        'sort_priority' => 'By priority (high → low)',
        'sort_deadline' => 'By deadline (near → far)',
        'filter_all' => 'Filter: All',
        'filter_late' => 'Late',
        'filter_on_time' => 'On time',
        'filter_completed' => 'Completed tasks',
        'filter_not_completed' => 'Not completed tasks',
        'apply_button' => 'Apply',
        'add_task' => 'Add Task',
        'no_tasks' => 'No tasks to display.',
        'deadline_label' => 'Deadline:',
        'late_indicator' => '(late)',
        'duration_label' => 'Duration:',
        'category_label' => 'Category:',
        'status_completed' => 'Completed',
        'status_in_progress' => 'In Progress',
        'add_task_title' => 'Add a new task',
        'edit_task_title' => 'Edit task',
        'task_title_label' => 'Title*',
        'task_title_placeholder' => 'Task title',
        'task_description_label' => 'Description',
        'task_description_placeholder' => 'Task description (optional)',
        'task_deadline_label' => 'Deadline*',
        'task_duration_label' => 'Duration*',
        'task_duration_placeholder' => 'E.g., 2h, 30min',
        'task_priority_label' => 'Priority*',
        'priority_high' => 'High',
        'priority_medium' => 'Medium',
        'priority_low' => 'Low',
        'task_category_label' => 'Category*',
        'cancel_button' => 'Cancel',
        'save_button' => 'Save',
        'no_task_selected' => 'No task selected for editing.',
        'new_event' => 'New Event',
        'description' => 'Description',
        'time' => 'Time',
        'color' => 'Color',
        'today' => 'Today',
        'events' => 'Events',
        'no_events' => 'No events for this day.',
        'edit' => 'Edit',
        'purple' => 'Purple',
        'light_purple' => 'Light Purple',
        'green' => 'Green',
        'blue' => 'Blue',
        'red' => 'Red',
        'settings' => 'Settings',
        'loading' => 'Loading...',
        'error_loading' => 'Error loading events',
        // Clés ajoutées pour settings.php
        'task_overdue' => 'Task "%s" is overdue (deadline: %s)',
        'task_due_soon' => 'Task "%s" is due soon (deadline: %s)',
        'notification_error' => 'Error: Unable to load notifications.',
        'error_load_user' => 'Error: Unable to load user data.',
        // Clés ajoutées pour sign.php
        'sign_in' => 'Sign In',
        'sign_up' => 'Sign Up',
        'forgot_password' => 'Forgot Password?',
        'no_account' => 'Don\'t have an account?',
        'have_account' => 'Already have an account?',
        'invalid_credentials' => 'Invalid email or password.',
        'email_exists' => 'Email already registered.',
        'signup_success' => 'Account created successfully! Please sign in.'
    ],
    'fr' => [
        'title' => 'Paramètres',
        'personal_info' => 'Informations personnelles',
        'name' => 'Nom',
        'surname' => 'Prénom',
        'email' => 'Email',
        'save' => 'Enregistrer',
        'theme' => 'Thème',
        'dark_mode' => 'Mode sombre',
        'language' => 'Langue',
        'select_language' => 'Sélectionner la langue',
        'notifications' => 'Notifications',
        'enable_notifications' => 'Activer les notifications',
        'change_password' => 'Changer le mot de passe',
        'current_password' => 'Mot de passe actuel',
        'new_password' => 'Nouveau mot de passe',
        'confirm_password' => 'Confirmer le mot de passe',
        'dashboard' => 'Tableau de bord',
        'profile' => 'Profil',
        'calendar' => 'Calendrier',
        'Notifications' => 'Notifications',
        'logout' => 'Déconnexion',
        'app_name' => 'Taskenuis',
        'success_message' => 'Action réalisée avec succès !',
        'error_message' => 'Erreur lors de l\'exécution de l\'action.',
        'python_execution_error' => 'Erreur : l\'exécution du script Python a échoué. Vérifiez le chemin Python (%s) et les permissions.',
        'python_json_error' => 'Erreur : la réponse du script Python n\'est pas un JSON valide. Consultez python_output.log pour plus de détails.',
        'search_unexpected_error' => 'Erreur inattendue lors de la recherche.',
        'tasks_fetch_error' => 'Erreur lors de la récupération des tâches : %s',
        'task_not_found' => 'Tâche non trouvée.',
        'task_fetch_error' => 'Erreur lors de la récupération de la tâche : %s',
        'search_placeholder' => 'Chercher une tâche...',
        'all_categories' => 'Toutes catégories',
        'category_work' => 'Travail',
        'category_personal' => 'Personnel',
        'category_shopping' => 'Courses',
        'search_button' => 'Rechercher',
        'sort_none' => 'Trier : Aucun',
        'sort_priority' => 'Par priorité (haute → basse)',
        'sort_deadline' => 'Par échéance (proche → lointaine)',
        'filter_all' => 'Filtrer : Tous',
        'filter_late' => 'En retard',
        'filter_on_time' => 'Non en retard',
        'filter_completed' => 'Tâches terminées',
        'filter_not_completed' => 'Tâches non terminées',
        'apply_button' => 'Appliquer',
        'add_task' => 'Ajouter une tâche',
        'no_tasks' => 'Aucune tâche à afficher.',
        'deadline_label' => 'Échéance :',
        'late_indicator' => '(en retard)',
        'duration_label' => 'Durée :',
        'category_label' => 'Catégorie :',
        'status_completed' => 'Terminé',
        'status_in_progress' => 'En cours',
        'add_task_title' => 'Ajouter une nouvelle tâche',
        'edit_task_title' => 'Modifier la tâche',
        'task_title_label' => 'Titre*',
        'task_title_placeholder' => 'Titre de la tâche',
        'task_description_label' => 'Description',
        'task_description_placeholder' => 'Description de la tâche (facultatif)',
        'task_deadline_label' => 'Date d\'échéance*',
        'task_duration_label' => 'Durée*',
        'task_duration_placeholder' => 'Ex: 2h, 30min',
        'task_priority_label' => 'Priorité*',
        'priority_high' => 'Haute',
        'priority_medium' => 'Moyenne',
        'priority_low' => 'Basse',
        'task_category_label' => 'Catégorie*',
        'cancel_button' => 'Annuler',
        'save_button' => 'Enregistrer',
        'no_task_selected' => 'Aucune tâche sélectionnée pour modification.',
        'new_event' => 'Nouvel Événement',
        'description' => 'Description',
        'time' => 'Heure',
        'color' => 'Couleur',
        'today' => 'Aujourd\'hui',
        'events' => 'Événements',
        'no_events' => 'Aucun événement pour ce jour.',
        'edit' => 'Modifier',
        'purple' => 'Violet',
        'light_purple' => 'Violet clair',
        'green' => 'Vert',
        'blue' => 'Bleu',
        'red' => 'Rouge',
        'settings' => 'Paramètres',
        'loading' => 'Chargement...',
        'error_loading' => 'Erreur lors du chargement des événements',
        // Clés ajoutées pour settings.php
        'task_overdue' => 'La tâche "%s" est en retard (date limite : %s)',
        'task_due_soon' => 'La tâche "%s" est bientôt due (date limite : %s)',
        'notification_error' => 'Erreur : Impossible de charger les notifications.',
        'error_load_user' => 'Erreur : Impossible de charger les données de l\'utilisateur.',
        // Clés ajoutées pour sign.php
        'sign_in' => 'Connexion',
        'sign_up' => 'Inscription',
        'forgot_password' => 'Mot de passe oublié ?',
        'no_account' => 'Vous n\'avez pas de compte ?',
        'have_account' => 'Vous avez déjà un compte ?',
        'invalid_credentials' => 'Email ou mot de passe incorrect.',
        'email_exists' => 'Email déjà enregistré.',
        'signup_success' => 'Compte créé avec succès ! Veuillez vous connecter.'
    ],
    'ar' => [
        'title' => 'الإعدادات',
        'personal_info' => 'المعلومات الشخصية',
        'name' => 'الاسم',
        'surname' => 'اللقب',
        'email' => 'البريد الإلكتروني',
        'save' => 'حفظ',
        'theme' => 'الثيم',
        'dark_mode' => 'الوضع الداكن',
        'language' => 'اللغة',
        'select_language' => 'اختر اللغة',
        'notifications' => 'الإشعارات',
        'enable_notifications' => 'تفعيل الإشعارات',
        'change_password' => 'تغيير كلمة المرور',
        'current_password' => 'كلمة المرور الحالية',
        'new_password' => 'كلمة المرور الجديدة',
        'confirm_password' => 'تأكيد كلمة المرور',
        'dashboard' => 'لوحة القيادة',
        'profile' => 'الملف الشخصي',
        'calendar' => 'التقويم',
        'Notifications' => 'الإشعارات',
        'logout' => 'تسجيل الخروج',
        'app_name' => 'تاسكينويس',
        'success_message' => 'تمت العملية بنجاح!',
        'error_message' => 'خطأ أثناء تنفيذ العملية.',
        'python_execution_error' => 'خطأ: فشل تنفيذ سكريبت بايثون. تحقق من مسار بايثون (%s) والأذونات.',
        'python_json_error' => 'خطأ: استجابة سكريبت بايثون ليست JSON صالحًا. راجع python_output.log لمزيد من التفاصيل.',
        'search_unexpected_error' => 'خطأ غير متوقع أثناء البحث.',
        'tasks_fetch_error' => 'خطأ أثناء جلب المهام: %s',
        'task_not_found' => 'المهمة غير موجودة.',
        'task_fetch_error' => 'خطأ أثناء جلب المهمة: %s',
        'search_placeholder' => 'البحث عن مهمة...',
        'all_categories' => 'جميع الفئات',
        'category_work' => 'عمل',
        'category_personal' => 'شخصي',
        'category_shopping' => 'تسوق',
        'search_button' => 'بحث',
        'sort_none' => 'فرز: لا شيء',
        'sort_priority' => 'حسب الأولوية (عالية → منخفضة)',
        'sort_deadline' => 'حسب الموعد النهائي (قريب → بعيد)',
        'filter_all' => 'تصفية: الكل',
        'filter_late' => 'متأخر',
        'filter_on_time' => 'في الوقت المحدد',
        'filter_completed' => 'المهام المكتملة',
        'filter_not_completed' => 'المهام غير المكتملة',
        'apply_button' => 'تطبيق',
        'add_task' => 'إضافة مهمة',
        'no_tasks' => 'لا توجد مهام لعرضها.',
        'deadline_label' => 'الموعد النهائي:',
        'late_indicator' => '(متأخر)',
        'duration_label' => 'المدة:',
        'category_label' => 'الفئة:',
        'status_completed' => 'مكتمل',
        'status_in_progress' => 'قيد التقدم',
        'add_task_title' => 'إضافة مهمة جديدة',
        'edit_task_title' => 'تعديل المهمة',
        'task_title_label' => 'العنوان*',
        'task_title_placeholder' => 'عنوان المهمة',
        'task_description_label' => 'الوصف',
        'task_description_placeholder' => 'وصف المهمة (اختياري)',
        'task_deadline_label' => 'الموعد النهائي*',
        'task_duration_label' => 'المدة*',
        'task_duration_placeholder' => 'مثال: ساعتان، 30 دقيقة',
        'task_priority_label' => 'الأولوية*',
        'priority_high' => 'عالية',
        'priority_medium' => 'متوسطة',
        'priority_low' => 'منخفضة',
        'task_category_label' => 'الفئة*',
        'cancel_button' => 'إلغاء',
        'save_button' => 'حفظ',
        'no_task_selected' => 'لم يتم تحديد مهمة للتعديل.',
        'new_event' => 'حدث جديد',
        'description' => 'الوصف',
        'time' => 'الوقت',
        'color' => 'اللون',
        'today' => 'اليوم',
        'events' => 'الأحداث',
        'no_events' => 'لا توجد أحداث لهذا اليوم.',
        'edit' => 'تعديل',
        'purple' => 'أرجواني',
        'light_purple' => 'أرجواني فاتح',
        'green' => 'أخضر',
        'blue' => 'أزرق',
        'red' => 'أحمر',
        'settings' => 'الإعدادات',
        'loading' => 'جار التحميل...',
        'error_loading' => 'خطأ أثناء تحميل الأحداث',
        // Clés ajoutées pour settings.php
        'task_overdue' => 'المهمة "%s" متأخرة (الموعد النهائي: %s)',
        'task_due_soon' => 'المهمة "%s" ستكون مستحقة قريبًا (الموعد النهائي: %s)',
        'notification_error' => 'خطأ: تعذر تحميل الإشعارات.',
        'error_load_user' => 'خطأ: تعذر تحميل بيانات المستخدم.',
        // Clés ajoutées pour sign.php
        'sign_in' => 'تسجيل الدخول',
        'sign_up' => 'إنشاء حساب',
        'forgot_password' => 'نسيت كلمة المرور؟',
        'no_account' => 'ليس لديك حساب؟',
        'have_account' => 'هل لديك حساب بالفعل؟',
        'invalid_credentials' => 'البريد الإلكتروني أو كلمة المرور غير صحيحة.',
        'email_exists' => 'البريد الإلكتروني مسجل بالفعل.',
        'signup_success' => 'تم إنشاء الحساب بنجاح! يرجى تسجيل الدخول.'
    ]
];

// Charger la langue depuis le cookie ou utiliser 'en' par défaut
$language = isset($_COOKIE['language']) ? $_COOKIE['language'] : 'en';
if (!isset($translations[$language])) {
    $language = 'en';
}
?>